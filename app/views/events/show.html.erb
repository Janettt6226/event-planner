<div class="container">
  <h1><%= @event.title %></h1>
  <%= link_to "Back to all events", events_path %>

  <p>Date: <%= @event.start_time %></p>
  <p>Place: <%= @event.location %></p>
  <p>Description: <%= @event.description %></p>
  <h5>People invited:</h5>
  <% @event.invitations.each do |invitation| %>
    <ul>
      <li><%= invitation.user.username %></li>
    </ul>
  <% end %>
  <%= link_to "Invite more friends", new_event_invitation_path(@event) %>
  <%= link_to "Update event", edit_event_path(@event) %>
  <div class="new-suggestion">
    <%= render "suggestions/new", suggestion: @suggestion %>
  </div>
    <% @suggestions.each_with_index do |suggestion, i| %>
      <div class="row">
        <div class="col">
        <% if suggestion.date.nil? %>
          <p>Option <%= i + 1 %>: <%= suggestion.activity %></p>
          <% elsif suggestion.activity.nil? %>
          <p>Option <%= i + 1 %>: <%= suggestion.date.to_date.strftime('%A, %B %d, %Y') unless suggestion.date.nil? %></p>
          <% end %>
        </div>
          <div class="col">
            <%= simple_form_for [suggestion, @answer] do |f| %>
              <%= f.hidden_field :available, value: true %>
              <%= f.submit "Yes, count me in!" %>
            <% end %>
            <% unless @answer.nil? %>
              <%= link_to "Sorry, finally I can't ðŸ˜¿", suggestion_answer_path([suggestion, @answer]), data: { "turbo-method": :delete,  turbo_confirm: "Are you sure?" } %>
            <% end %>
          </div>
          <div class="col">
            <p>People available:</p>
            <% suggestion.answers.map { |answer| answer.user.username if answer.available? }.each do |people| %>
              <ul><li><%= people %></li></ul>
            <% end %>
          </div>
      </div>
    <% end %>
  <%= link_to "Cancel event", event_path(@event), data: { "turbo-method": :delete,  turbo_confirm: "Are you sure?" }  %>
</div>
<%= console %>
